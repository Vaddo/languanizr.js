/**
 * Languanizr.js v0.1.0
 *
 * Client side translation script
 * -
 * Create multi language sites fast and simple.
 *
 *
 * Http://www.languanizrjs.com
 * https://github.com/Vaddo/languanizr.js/tree/master
 *
 * MIT licensed
 *
 * Copyright (C) 2013 - A project by Vadim Hermann - http://www.vadim-hermann.com
 */
var languanizr={_defaultOptions:{auto:!0,permanent:!1,attrScan:["alt","value","title"],removeSelectors:!1},_options:{},setOptions:function(a){$.extend(languanizr._options,languanizr._defaultOptions,a);return this},loadLanguage:function(a,b){languanizr._load(a,b);return this},reloadLanguage:function(a,b){languanizr._getStorage().clear();languanizr._load(a,b);setTimeout(function(){window.location.reload()},100);return this},doTranslate:function(){var a=$("[data-languanize]"),b=a.length,e=languanizr._options.attrScan.length,
h=languanizr._getStorage(),d,f,g,c,k,l;for(f=0;f<b;++f){d=$(a[f]);l=d[0].tagName;for(g=0;g<e;++g)k=languanizr._options.attrScan[g],c=d.attr(k),"undefined"!==typeof c&&!1!==c&&(c=languanizr._replacePlaceholder(c,h),d.attr(k,c));if("INPUT"==l||"TEXTAREA"==l)c=d.val(),c=languanizr._replacePlaceholder(c,h),d.val(c);0==d.children().length&&(c=d.html(),c=languanizr._replacePlaceholder(c,h),d.html(c));languanizr._options.removeSelectors&&d.removeAttr("data-languanize")}languanizr._options.auto&&languanizr._bindListener();
return this},_load:function(a,b){a?$.ajax({type:"POST",url:a,contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){languanizr._validateLanguagePack(a)&&(languanizr._checkAndStore(a),languanizr.doTranslate(),void 0!=b&&b())},error:function(a,b,d){alert("languanizr.js - Loading language failed!")}}):alert("languanizr.js - No language pack found!")},_validateLanguagePack:function(a){if(languanizr._isNumber(a.package_version)&&a.text&&languanizr._isString(a.language))return!0;
alert("languanizr.js - Invalid language package!");return!1},_isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},_isString:function(a){return"[object String]"==toString.call(a)},_replacePlaceholder:function(a,b){for(var e=/\{\$#[0-9]+#[^]*?\$\}/;a.match(e);)curText=a.match(e)[0],langId=curText.match(/#[0-9]+#/)[0].replace("#","").replace("#",""),a=a.replace(curText,b.getItem(langId));return a},_getStorage:function(){return languanizr._options.permanent?window.localStorage:window.sessionStorage},
_checkAndStore:function(a){var b=languanizr._getStorage();(null==b.getItem("package_version")&&null==b.getItem("language")||b.getItem("package_version")!=a.package_version&&b.getItem("language")==a.language)&&languanizr._store(a,b)},_store:function(a,b){b.clear();for(id in a.text)a.text.hasOwnProperty(id)&&(b.setItem(id,a.text[id]),b.setItem("package_version",a.package_version),b.setItem("language",a.language))},_bindListener:function(){$("html").one("DOMSubtreeModified",languanizr.doTranslate)}};